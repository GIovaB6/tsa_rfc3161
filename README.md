# Flutter TSA (Time Stamping Authority)  client rfc3161


tested on macos and android configurations
(fails with flutter web if TSA host does not provide CORS header)


```
import 'package:dio/dio.dart';
import 'TSARequest.dart';

// ...


 try {
     TSARequest tsq = TSARequest.fromFile(
          filepath: file.path,
          algorithm: TSAHashAlgo.sha512,
          nonce: nonceValue,
          certReq: true);
          
      // for a string use 
      // TSARequest tsq = TSARequest.fromString(s: "yannick", algorithm: TSAHashAlgo.sha512);
      
      Response r = await tsq.run(hostname: "http://timestamp.digicert.com");
      
    } on Exception catch (e) {
      debugPrint(e.toString());
    }
```

Dio Response r : contains the http response from the timestamp server authority






Note 1 

*tsq.asn1sequence.encodedBytes* is similar to
the content of file.digicert.tsq generated by openssl
          
```
openssl ts -query -data file.txt -no_nonce -sha256 -cert -out file.digicert.tsq
```
Note 2

the content of *response.data* is similar to 
the content of file.digicert.tsr generated by digicert http's http server
```
curl -H 'Content-Type: application/timestamp-query' --data-binary '@file.digicert.tsq'  http://timestamp.digicert.com > file.digicert.tsr
```

